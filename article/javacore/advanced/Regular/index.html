<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="iGDu0e88zUCIa6OhhkXgxyKDioORMrt1KC_43F_VRcg" />
    <meta name="baidu-site-verification" content="A2ImdbykAi" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword" content="">
    <link rel="shortcut icon" href="/img/meditation.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
        [java核心技术] Java正则 - LiaoCan | Blog
        
    </title>

    <link rel="canonical" href="https://liaocan.top/article/javacore/advanced/Regular/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css">


    <link rel="stylesheet" href="/css/donate.css">

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>

    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


</head>

<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header {
        background-image: url('/img/article_header/guangzhou3.jpg')
                /*post*/
                
    }

    
</style>

<header class="intro-header">
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    
                    <div class="post-heading">
                        <div class="tags">
                            
                            <a class="tag" href="/tags/#java核心技术" title="java核心技术">
                                java核心技术</a>
                            
                            <a class="tag" href="/tags/#regex" title="regex">
                                regex</a>
                            
                        </div>
                        <h1>
                            [java核心技术] Java正则
                        </h1>
                        <!-- <h2 class="subheading"></h2> -->
                        <!--文章访问量统计-->
                        
                        <span id="busuanzi_container_page_pv">本文已被阅读过<span id="busuanzi_value_page_pv"></span>次</span>
                        
                        <!--文章访问量统计--> <span class="meta">
                            Posted by
                            Liao Can on
                            2015-05-06
                        </span>
                    </div>
                    


                </div>
            </div>
        </div>
    </div>
</header>
	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Liao Can</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    
                    
                        <li>
                            <a href="/about/" >About</a>
                        </li>
                    
                        <li>
                            <a href="/archive/" >Archives</a>
                        </li>
                    
                        <li>
                            <a href="/tags/" >Tags</a>
                        </li>
                    


                    <!-- 

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                     -->
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h2 id="导读">导读</h2>
<p><strong>正则表达式是什么？有什么用？</strong></p>
<p><strong><em>正则表达式(Regular Expression)</em><strong>是一种文本规则，可以用来</strong>校验</strong>、<strong>查找</strong>、<strong>替换</strong>与规则匹配的文本。</p>
<p><strong>又爱又恨的正则</strong></p>
<p>正则表达式是一个强大的文本匹配工具，但是它的规则实在很繁琐，而且理解起来也颇为蛋疼，容易让人望而生畏。</p>
<p><strong>如何学习正则</strong></p>
<p>刚接触正则时，我看了一堆正则的语义说明，但是仍然不明所以。后来，我多接触一些正则的应用实例，渐渐有了感觉，再结合语义说明，终有领悟。我觉得正则表达式和武侠修练武功差不多，应该先练招式，再练心法。如果一开始就直接看正则的规则，保证你会懵逼。当你熟悉基本招式（正则基本使用案例）后，也该修炼修炼心法（正则语法）了。真正的高手不能只靠死记硬背那么几招把式。就像张三丰教张无忌太极拳一样，领悟心法，融会贯通，少侠你就可以无招胜有招，成为传说中的绝世高手。</p>
<p><strong>以上闲话可归纳为一句：学习正则应该从实例去理解规则。</strong></p>
<h2 id="招式篇">招式篇</h2>
<p>JDK 中的<code>java.util.regex</code>包提供了对正则表达式的支持。</p>
<p><code>java.util.regex</code>有三个核心类：</p>
<ul>
<li><strong>Pattern 类：</strong><code>Pattern</code>是一个正则表达式的编译表示。</li>
<li><strong>Matcher 类：</strong><code>Matcher</code>是对输入字符串进行解释和匹配操作的引擎。</li>
<li><strong>PatternSyntaxException：</strong><code>PatternSyntaxException</code>是一个非强制异常类，它表示一个正则表达式模式中的语法错误。</li>
</ul>
<p>**<em>注：</em>**需要格外注意一点，在 Java 中使用反斜杠&quot;\“时必须写成 <code>&quot;\\&quot;</code>。所以本文的代码出现形如<code>String regex = &quot;\\$\\{.*?\\}&quot;</code> 其实就是”\$\{.*?\}&quot;，不要以为是画风不对哦。</p>
<h3 id="pattern-类">Pattern 类</h3>
<p><code>Pattern</code>类没有公共构造方法。要创建一个<code>Pattern</code>对象，你必须首先调用其<strong>静态方法</strong><code>compile</code>，加载正则规则字符串，然后返回一个 Pattern 对象。</p>
<p>与<code>Pattern</code>类一样，<code>Matcher</code>类也没有公共构造方法。你需要调用<code>Pattern</code>对象的<code>matcher</code>方法来获得一个<code>Matcher</code>对象。</p>
<p><strong><em>案例：Pattern 和 Matcher 的初始化</em></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Pattern p = Pattern.compile(regex);</span><br><span class="line">Matcher m = p.matcher(content);</span><br></pre></td></tr></table></figure>
<h3 id="matcher-类">Matcher 类</h3>
<p><code>Matcher</code>类可以说是<code>java.util.regex</code>核心类中的必杀技！</p>
<p><code>Matcher</code>类有三板斧（三类功能）：</p>
<ul>
<li>校验</li>
<li>查找</li>
<li>替换</li>
</ul>
<p>下面我们来领略一下这三块的功能。</p>
<h4 id="校验文本是否与正则规则匹配">校验文本是否与正则规则匹配</h4>
<p>为了检查文本是否与正则规则匹配，Matcher 提供了以下几个返回值为<code>boolean</code>的方法。</p>
<table>
<thead>
<tr>
<th><strong>序号</strong></th>
<th><strong>方法及说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>**public boolean lookingAt() ** 尝试将从区域开头开始的输入序列与该模式匹配。</td>
</tr>
<tr>
<td>2</td>
<td>**public boolean find() **尝试查找与该模式匹配的输入序列的下一个子序列。</td>
</tr>
<tr>
<td>3</td>
<td>**public boolean find(int start）**重置此匹配器，然后尝试查找匹配该模式、从指定索引开始的输入序列的下一个子序列。</td>
</tr>
<tr>
<td>4</td>
<td>**public boolean matches() **尝试将整个区域与模式匹配。</td>
</tr>
</tbody>
</table>
<p>如果你傻傻分不清上面的查找方法有什么区别，那么下面一个例子就可以让你秒懂。</p>
<h5 id="案例lookingat-vs-find-vs-matches">案例：lookingAt vs find vs matches</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	checkLookingAt(<span class="string">"hello"</span>, <span class="string">"helloworld"</span>);</span><br><span class="line">	checkLookingAt(<span class="string">"world"</span>, <span class="string">"helloworld"</span>);</span><br><span class="line"></span><br><span class="line">	checkFind(<span class="string">"hello"</span>, <span class="string">"helloworld"</span>);</span><br><span class="line">	checkFind(<span class="string">"world"</span>, <span class="string">"helloworld"</span>);</span><br><span class="line"></span><br><span class="line">	checkMatches(<span class="string">"hello"</span>, <span class="string">"helloworld"</span>);</span><br><span class="line">	checkMatches(<span class="string">"world"</span>, <span class="string">"helloworld"</span>);</span><br><span class="line">	checkMatches(<span class="string">"helloworld"</span>, <span class="string">"helloworld"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">checkLookingAt</span><span class="params">(String regex, String content)</span> </span>&#123;</span><br><span class="line">	Pattern p = Pattern.compile(regex);</span><br><span class="line">	Matcher m = p.matcher(content);</span><br><span class="line">	<span class="keyword">if</span> (m.lookingAt()) &#123;</span><br><span class="line">		System.out.println(content + <span class="string">"\tlookingAt： "</span> + regex);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		System.out.println(content + <span class="string">"\tnot lookingAt： "</span> + regex);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">checkFind</span><span class="params">(String regex, String content)</span> </span>&#123;</span><br><span class="line">	Pattern p = Pattern.compile(regex);</span><br><span class="line">	Matcher m = p.matcher(content);</span><br><span class="line">	<span class="keyword">if</span> (m.find()) &#123;</span><br><span class="line">		System.out.println(content + <span class="string">"\tfind： "</span> + regex);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		System.out.println(content + <span class="string">"\tnot find： "</span> + regex);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">checkMatches</span><span class="params">(String regex, String content)</span> </span>&#123;</span><br><span class="line">	Pattern p = Pattern.compile(regex);</span><br><span class="line">	Matcher m = p.matcher(content);</span><br><span class="line">	<span class="keyword">if</span> (m.matches()) &#123;</span><br><span class="line">		System.out.println(content + <span class="string">"\tmatches： "</span> + regex);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		System.out.println(content + <span class="string">"\tnot matches： "</span> + regex);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">helloworld	lookingAt： hello</span><br><span class="line">helloworld	not lookingAt： world</span><br><span class="line">helloworld	find： hello</span><br><span class="line">helloworld	find： world</span><br><span class="line">helloworld	not matches： hello</span><br><span class="line">helloworld	not matches： world</span><br><span class="line">helloworld	matches： helloworld</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong></p>
<p>regex = “world” 表示的正则规则是以 world 开头的字符串，regex = “hello” 和 regex = “helloworld” 也是同理。</p>
<ul>
<li><code>lookingAt</code>方法从头部开始，检查 content 字符串是否有子字符串于正则规则匹配。</li>
<li><code>find</code>方法检查 content 字符串是否有子字符串于正则规则匹配，不管字符串所在位置。</li>
<li><code>matches</code>方法检查 content 字符串整体是否与正则规则匹配。</li>
</ul>
<h4 id="查找匹配正则规则的文本位置">查找匹配正则规则的文本位置</h4>
<p>为了查找文本匹配正则规则的位置，<code>Matcher</code>提供了以下方法：</p>
<table>
<thead>
<tr>
<th><strong>序号</strong></th>
<th><strong>方法及说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>**public int start() **返回以前匹配的初始索引。</td>
</tr>
<tr>
<td>2</td>
<td><strong>public int start(int group)</strong> 返回在以前的匹配操作期间，由给定组所捕获的子序列的初始索引</td>
</tr>
<tr>
<td>3</td>
<td>**public int end()**返回最后匹配字符之后的偏移量。</td>
</tr>
<tr>
<td>4</td>
<td>**public int end(int group)**返回在以前的匹配操作期间，由给定组所捕获子序列的最后字符之后的偏移量。</td>
</tr>
<tr>
<td>5</td>
<td>**public String group()**返回前一个符合匹配条件的子序列。</td>
</tr>
<tr>
<td>6</td>
<td>**public String group(int group)**返回指定的符合匹配条件的子序列。</td>
</tr>
</tbody>
</table>
<h5 id="案例使用-start-end-group-查找所有匹配正则条件的子序列">案例：使用 start()、end()、group() 查找所有匹配正则条件的子序列</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">final</span> String regex = <span class="string">"world"</span>;</span><br><span class="line">	<span class="keyword">final</span> String content = <span class="string">"helloworld helloworld"</span>;</span><br><span class="line">	Pattern p = Pattern.compile(regex);</span><br><span class="line">	Matcher m = p.matcher(content);</span><br><span class="line">	System.out.println(<span class="string">"content: "</span> + content);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">		i++;</span><br><span class="line">		System.out.println(<span class="string">"["</span> + i + <span class="string">"th] found"</span>);</span><br><span class="line">		System.out.print(<span class="string">"start: "</span> + m.start() + <span class="string">", "</span>);</span><br><span class="line">		System.out.print(<span class="string">"end: "</span> + m.end() + <span class="string">", "</span>);</span><br><span class="line">		System.out.print(<span class="string">"group: "</span> + m.group() + <span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">content: helloworld helloworld</span><br><span class="line">[1th] found</span><br><span class="line">start: 5, end: 10, group: world</span><br><span class="line">[2th] found</span><br><span class="line">start: 16, end: 21, group: world</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong></p>
<p>例子很直白，不言自明了吧。</p>
<h4 id="替换匹配正则规则的文本">替换匹配正则规则的文本</h4>
<p>替换方法是替换输入字符串里文本的方法：</p>
<table>
<thead>
<tr>
<th><strong>序号</strong></th>
<th><strong>方法及说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>**public Matcher appendReplacement(StringBuffer sb, String replacement)**实现非终端添加和替换步骤。</td>
</tr>
<tr>
<td>2</td>
<td>**public StringBuffer appendTail(StringBuffer sb)**实现终端添加和替换步骤。</td>
</tr>
<tr>
<td>3</td>
<td>**public String replaceAll(String replacement) ** 替换模式与给定替换字符串相匹配的输入序列的每个子序列。</td>
</tr>
<tr>
<td>4</td>
<td><strong>public String replaceFirst(String replacement)</strong> 替换模式与给定替换字符串匹配的输入序列的第一个子序列。</td>
</tr>
<tr>
<td>5</td>
<td>**public static String quoteReplacement(String s)**返回指定字符串的字面替换字符串。这个方法返回一个字符串，就像传递给 Matcher 类的 appendReplacement 方法一个字面字符串一样工作。</td>
</tr>
</tbody>
</table>
<h5 id="案例replacefirst-vs-replaceall">案例：replaceFirst vs replaceAll</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	String regex = <span class="string">"can"</span>;</span><br><span class="line">	String replace = <span class="string">"can not"</span>;</span><br><span class="line">	String content = <span class="string">"I can because I think I can."</span>;</span><br><span class="line"></span><br><span class="line">	Pattern p = Pattern.compile(regex);</span><br><span class="line">	Matcher m = p.matcher(content);</span><br><span class="line"></span><br><span class="line">	System.out.println(<span class="string">"content: "</span> + content);</span><br><span class="line">	System.out.println(<span class="string">"replaceFirst: "</span> + m.replaceFirst(replace));</span><br><span class="line">	System.out.println(<span class="string">"replaceAll: "</span> + m.replaceAll(replace));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">content: I can because I think I can.</span><br><span class="line">replaceFirst: I can not because I think I can.</span><br><span class="line">replaceAll: I can not because I think I can not.</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong></p>
<p>replaceFirst：替换第一个匹配正则规则的子序列。</p>
<p>replaceAll：替换所有匹配正则规则的子序列。</p>
<h5 id="案例appendreplacement-appendtail-和-replaceall">案例：appendReplacement、appendTail 和 replaceAll</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	String regex = <span class="string">"can"</span>;</span><br><span class="line">	String replace = <span class="string">"can not"</span>;</span><br><span class="line">	String content = <span class="string">"I can because I think I can."</span>;</span><br><span class="line">	StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">	StringBuffer sb2 = <span class="keyword">new</span> StringBuffer();</span><br><span class="line"></span><br><span class="line">	System.out.println(<span class="string">"content: "</span> + content);</span><br><span class="line">	Pattern p = Pattern.compile(regex);</span><br><span class="line">	Matcher m = p.matcher(content);</span><br><span class="line">	<span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">		m.appendReplacement(sb, replace);</span><br><span class="line">	&#125;</span><br><span class="line">	System.out.println(<span class="string">"appendReplacement: "</span> + sb);</span><br><span class="line">	m.appendTail(sb);</span><br><span class="line">	System.out.println(<span class="string">"appendTail: "</span> + sb);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">content: I can because I think I can.</span><br><span class="line">appendReplacement: I can not because I think I can not</span><br><span class="line">appendTail: I can not because I think I can not.</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong></p>
<p>从输出结果可以看出，<code>appendReplacement</code>和<code>appendTail</code>方法组合起来用，功能和<code>replaceAll</code>是一样的。</p>
<p>如果你查看<code>replaceAll</code>的源码，会发现其内部就是使用<code>appendReplacement</code>和<code>appendTail</code>方法组合来实现的。</p>
<h5 id="案例quotereplacement-和-replaceall解决特殊字符替换问题">案例：quoteReplacement 和 replaceAll，解决特殊字符替换问题</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	String regex = <span class="string">"\\$\\&#123;.*?\\&#125;"</span>;</span><br><span class="line">	String replace = <span class="string">"$&#123;product&#125;"</span>;</span><br><span class="line">	String content = <span class="string">"product is $&#123;productName&#125;."</span>;</span><br><span class="line"></span><br><span class="line">	Pattern p = Pattern.compile(regex);</span><br><span class="line">	Matcher m = p.matcher(content);</span><br><span class="line">	String replaceAll = m.replaceAll(replace);</span><br><span class="line"></span><br><span class="line">	System.out.println(<span class="string">"content: "</span> + content);</span><br><span class="line">	System.out.println(<span class="string">"replaceAll: "</span> + replaceAll);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: No group with name &#123;product&#125;</span><br><span class="line">	at java.util.regex.Matcher.appendReplacement(Matcher.java:849)</span><br><span class="line">	at java.util.regex.Matcher.replaceAll(Matcher.java:955)</span><br><span class="line">	at org.zp.notes.javase.regex.RegexDemo.wrongMethod(RegexDemo.java:42)</span><br><span class="line">	at org.zp.notes.javase.regex.RegexDemo.main(RegexDemo.java:18)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">	at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong></p>
<p><code>String regex = &quot;\\$\\{.*?\\}&quot;;</code>表示匹配类似<code>${name}</code>这样的字符串。由于<code>$</code>、<code>{</code> 、<code>}</code>都是特殊字符，需要用反义字符<code>\</code>来修饰才能被当做一个字符串字符来处理。</p>
<p>上面的例子是想将 <code>${productName}</code> 替换为 <code>${product}</code> ，然而<code>replaceAll</code>方法却将传入的字符串中的<code>$</code>当做特殊字符来处理了。结果产生异常。</p>
<p>如何解决这个问题?</p>
<p>JDK1.5 引入了<code>quoteReplacement</code>方法。它可以用来转换特殊字符。其实源码非常简单，就是判断字符串中如果有<code>\</code>或<code>$</code>，就为它加一个转义字符<code>\</code></p>
<p>我们对上面的代码略作调整：</p>
<p><code>m.replaceAll(replace)</code>改为<code>m.replaceAll(Matcher.quoteReplacement(replace))</code>，新代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	String regex = <span class="string">"\\$\\&#123;.*?\\&#125;"</span>;</span><br><span class="line">	String replace = <span class="string">"$&#123;product&#125;"</span>;</span><br><span class="line">	String content = <span class="string">"product is $&#123;productName&#125;."</span>;</span><br><span class="line"></span><br><span class="line">	Pattern p = Pattern.compile(regex);</span><br><span class="line">	Matcher m = p.matcher(content);</span><br><span class="line">	String replaceAll = m.replaceAll(Matcher.quoteReplacement(replace));</span><br><span class="line"></span><br><span class="line">	System.out.println(<span class="string">"content: "</span> + content);</span><br><span class="line">	System.out.println(<span class="string">"replaceAll: "</span> + replaceAll);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">content: product is $&#123;productName&#125;.</span><br><span class="line">replaceAll: product is $&#123;product&#125;.</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong></p>
<p>字符串中如果有<code>\</code>或<code>$</code>，不能被正常解析的问题解决。</p>
<h2 id="心法篇">心法篇</h2>
<p>为了理解下面章节的内容，你需要先了解一些基本概念。</p>
<p><strong>正则表达式</strong></p>
<p>正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。</p>
<p><strong>元字符</strong></p>
<p>元字符(metacharacters)就是正则表达式中具有特殊意义的专用字符。</p>
<p><strong>普通字符</strong></p>
<p>普通字符包括没有显式指定为元字符的所有可打印和不可打印字符。这包括所有大写和小写字母、所有数字、所有标点符号和一些其他符号。</p>
<h3 id="元字符">元字符</h3>
<h4 id="基本元字符">基本元字符</h4>
<p>正则表达式的元字符难以记忆，很大程度上是因为有很多为了简化表达而出现的等价字符。</p>
<p>而实际上最基本的元字符，并没有那么多。对于大部分的场景，基本元字符都可以搞定。</p>
<p>让我们从一个个实例出发，由浅入深的去体会正则的奥妙。</p>
<h5 id="多选-">多选 - |</h5>
<p><strong>例 匹配一个确定的字符串</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">checkMatches(<span class="string">"abc"</span>, <span class="string">"abc"</span>);</span><br></pre></td></tr></table></figure>
<p>如果要匹配一个确定的字符串，非常简单，如例 1 所示。</p>
<p>如果你不确定要匹配的字符串，希望有多个选择，怎么办？</p>
<p>答案是：使用元字符<code>|</code> ，它的含义是或。</p>
<p><strong>例 匹配多个可选的字符串</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 测试正则表达式字符：|</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"yes|no"</span>, <span class="string">"yes"</span>));</span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"yes|no"</span>, <span class="string">"no"</span>));</span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"yes|no"</span>, <span class="string">"right"</span>));</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yes	matches： yes|no</span><br><span class="line">no	matches： yes|no</span><br><span class="line">right	not matches： yes|no</span><br></pre></td></tr></table></figure>
<h5 id="分组-">分组 - ()</h5>
<p>如果你希望表达式由多个子表达式组成，你可以使用 <code>()</code>。</p>
<p><strong>例 匹配组合字符串</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Assert.assertTrue(checkMatches(<span class="string">"(play|end)(ing|ed)"</span>, <span class="string">"ended"</span>));</span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"(play|end)(ing|ed)"</span>, <span class="string">"ending"</span>));</span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"(play|end)(ing|ed)"</span>, <span class="string">"playing"</span>));</span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"(play|end)(ing|ed)"</span>, <span class="string">"played"</span>));</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ended	matches： (play|end)(ing|ed)</span><br><span class="line">ending	matches： (play|end)(ing|ed)</span><br><span class="line">playing	matches： (play|end)(ing|ed)</span><br><span class="line">played	matches： (play|end)(ing|ed)</span><br></pre></td></tr></table></figure>
<h5 id="指定单字符有效范围-">指定单字符有效范围 - []</h5>
<p>前面展示了如何匹配字符串，但是很多时候你需要精确的匹配一个字符，这时可以使用<code>[]</code> 。</p>
<p><strong>例 字符在指定范围</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 测试正则表达式字符：[]</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"[abc]"</span>, <span class="string">"b"</span>));  <span class="comment">// 字符只能是a、b、c</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"[a-z]"</span>, <span class="string">"m"</span>)); <span class="comment">// 字符只能是a - z</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"[A-Z]"</span>, <span class="string">"O"</span>)); <span class="comment">// 字符只能是A - Z</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"[a-zA-Z]"</span>, <span class="string">"K"</span>)); <span class="comment">// 字符只能是a - z和A - Z</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"[a-zA-Z]"</span>, <span class="string">"k"</span>));</span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"[0-9]"</span>, <span class="string">"5"</span>)); <span class="comment">// 字符只能是0 - 9</span></span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">b	matches： [abc]</span><br><span class="line">m	matches： [a-z]</span><br><span class="line">O	matches： [A-Z]</span><br><span class="line">K	matches： [a-zA-Z]</span><br><span class="line">k	matches： [a-zA-Z]</span><br><span class="line">5	matches： [0-9]</span><br></pre></td></tr></table></figure>
<h5 id="指定单字符无效范围-">指定单字符无效范围 - [^]</h5>
<p><strong>例 字符不能在指定范围</strong></p>
<p>如果需要匹配一个字符的逆操作，即字符不能在指定范围，可以使用<code>[^]</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 测试正则表达式字符：[^]</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"[^abc]"</span>, <span class="string">"b"</span>)); <span class="comment">// 字符不能是a、b、c</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"[^a-z]"</span>, <span class="string">"m"</span>)); <span class="comment">// 字符不能是a - z</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"[^A-Z]"</span>, <span class="string">"O"</span>)); <span class="comment">// 字符不能是A - Z</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"[^a-zA-Z]"</span>, <span class="string">"K"</span>)); <span class="comment">// 字符不能是a - z和A - Z</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"[^a-zA-Z]"</span>, <span class="string">"k"</span>));</span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"[^0-9]"</span>, <span class="string">"5"</span>)); <span class="comment">// 字符不能是0 - 9</span></span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">b	not matches： [^abc]</span><br><span class="line">m	not matches： [^a-z]</span><br><span class="line">O	not matches： [^A-Z]</span><br><span class="line">K	not matches： [^a-zA-Z]</span><br><span class="line">k	not matches： [^a-zA-Z]</span><br><span class="line">5	not matches： [^0-9]</span><br></pre></td></tr></table></figure>
<h5 id="限制字符数量-">限制字符数量 - {}</h5>
<p>如果想要控制字符出现的次数，可以使用<code>{}</code>。</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{n}</code></td>
<td>n 是一个非负整数。匹配确定的 n 次。</td>
</tr>
<tr>
<td><code>{n,}</code></td>
<td>n 是一个非负整数。至少匹配 n 次。</td>
</tr>
<tr>
<td><code>{n,m}</code></td>
<td>m 和 n 均为非负整数，其中 n &lt;= m。最少匹配 n 次且最多匹配 m 次。</td>
</tr>
</tbody>
</table>
<p><strong>例 限制字符出现次数</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#123;n&#125;: n 是一个非负整数。匹配确定的 n 次。</span></span><br><span class="line">checkMatches(<span class="string">"ap&#123;1&#125;"</span>, <span class="string">"a"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap&#123;1&#125;"</span>, <span class="string">"ap"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap&#123;1&#125;"</span>, <span class="string">"app"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap&#123;1&#125;"</span>, <span class="string">"apppppppppp"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123;n,&#125;: n 是一个非负整数。至少匹配 n 次。</span></span><br><span class="line">checkMatches(<span class="string">"ap&#123;1,&#125;"</span>, <span class="string">"a"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap&#123;1,&#125;"</span>, <span class="string">"ap"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap&#123;1,&#125;"</span>, <span class="string">"app"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap&#123;1,&#125;"</span>, <span class="string">"apppppppppp"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123;n,m&#125;: m 和 n 均为非负整数，其中 n &lt;= m。最少匹配 n 次且最多匹配 m 次。</span></span><br><span class="line">checkMatches(<span class="string">"ap&#123;2,5&#125;"</span>, <span class="string">"a"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap&#123;2,5&#125;"</span>, <span class="string">"ap"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap&#123;2,5&#125;"</span>, <span class="string">"app"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap&#123;2,5&#125;"</span>, <span class="string">"apppppppppp"</span>);</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a	not matches： ap&#123;1&#125;</span><br><span class="line">ap	matches： ap&#123;1&#125;</span><br><span class="line">app	not matches： ap&#123;1&#125;</span><br><span class="line">apppppppppp	not matches： ap&#123;1&#125;</span><br><span class="line">a	not matches： ap&#123;1,&#125;</span><br><span class="line">ap	matches： ap&#123;1,&#125;</span><br><span class="line">app	matches： ap&#123;1,&#125;</span><br><span class="line">apppppppppp	matches： ap&#123;1,&#125;</span><br><span class="line">a	not matches： ap&#123;2,5&#125;</span><br><span class="line">ap	not matches： ap&#123;2,5&#125;</span><br><span class="line">app	matches： ap&#123;2,5&#125;</span><br><span class="line">apppppppppp	not matches： ap&#123;2,5&#125;</span><br></pre></td></tr></table></figure>
<h5 id="转义字符-">转义字符 - /</h5>
<p>如果想要查找元字符本身，你需要使用转义符，使得正则引擎将其视作一个普通字符，而不是一个元字符去处理。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* 的转义字符：\*</span><br><span class="line">+ 的转义字符：\+</span><br><span class="line">? 的转义字符：\?</span><br><span class="line">^ 的转义字符：\^</span><br><span class="line">$ 的转义字符：\$</span><br><span class="line">. 的转义字符：\.</span><br></pre></td></tr></table></figure>
<p>如果是转义符<code>\</code>本身，你也需要使用<code>\\</code> 。</p>
<h5 id="指定表达式字符串的开始和结尾-">指定表达式字符串的开始和结尾 - ^、$</h5>
<p>如果希望匹配的字符串必须以特定字符串开头，可以使用<code>^</code> 。</p>
<p>注：请特别留意，这里的<code>^</code> 一定要和 <code>[^]</code> 中的 “^” 区分。</p>
<p><strong>例 限制字符串头部</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Assert.assertTrue(checkMatches(<span class="string">"^app[a-z]&#123;0,&#125;"</span>, <span class="string">"apple"</span>)); <span class="comment">// 字符串必须以app开头</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"^app[a-z]&#123;0,&#125;"</span>, <span class="string">"aplause"</span>));</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apple	matches： ^app[a-z]&#123;0,&#125;</span><br><span class="line">aplause	not matches： ^app[a-z]&#123;0,&#125;</span><br></pre></td></tr></table></figure>
<p>如果希望匹配的字符串必须以特定字符串开头，可以使用<code>$</code> 。</p>
<p><strong>例 限制字符串尾部</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Assert.assertTrue(checkMatches(<span class="string">"[a-z]&#123;0,&#125;ing$"</span>, <span class="string">"playing"</span>)); <span class="comment">// 字符串必须以ing结尾</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"[a-z]&#123;0,&#125;ing$"</span>, <span class="string">"long"</span>));</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">playing	matches： [a-z]&#123;0,&#125;ing$</span><br><span class="line">long	not matches： [a-z]&#123;0,&#125;ing$</span><br></pre></td></tr></table></figure>
<h4 id="等价字符">等价字符</h4>
<p>等价字符，顾名思义，就是对于基本元字符表达的一种简化（等价字符的功能都可以通过基本元字符来实现）。</p>
<p>在没有掌握基本元字符之前，可以先不用理会，因为很容易把人绕晕。</p>
<p>等价字符的好处在于简化了基本元字符的写法。</p>
<h5 id="表示某一类型字符的等价字符">表示某一类型字符的等价字符</h5>
<p>下表中的等价字符都表示某一类型的字符。</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>.</code></strong></td>
<td>匹配除“\n”之外的任何单个字符。</td>
</tr>
<tr>
<td><strong><code>\d</code></strong></td>
<td>匹配一个数字字符。等价于[0-9]。</td>
</tr>
<tr>
<td><strong><code>\D</code></strong></td>
<td>匹配一个非数字字符。等价于[^0-9]。</td>
</tr>
<tr>
<td><strong><code>\w</code></strong></td>
<td>匹配包括下划线的任何单词字符。类似但不等价于“[A-Za-z0-9_]”，这里的单词字符指的是 Unicode 字符集。</td>
</tr>
<tr>
<td><strong><code>\W</code></strong></td>
<td>匹配任何非单词字符。</td>
</tr>
<tr>
<td><strong><code>\s</code></strong></td>
<td>匹配任何不可见字符，包括空格、制表符、换页符等等。等价于[ \f\n\r\t\v]。</td>
</tr>
<tr>
<td><strong><code>\S</code></strong></td>
<td>匹配任何可见字符。等价于[ \f\n\r\t\v]。</td>
</tr>
</tbody>
</table>
<p><strong>案例 基本等价字符的用法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匹配除“\n”之外的任何单个字符</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">".&#123;1,&#125;"</span>, <span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_"</span>));</span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">".&#123;1,&#125;"</span>, <span class="string">"~!@#$%^&amp;*()+`-=[]&#123;&#125;;:&lt;&gt;,./?|\\"</span>));</span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"."</span>, <span class="string">"\n"</span>));</span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"[^\n]"</span>, <span class="string">"\n"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配一个数字字符。等价于[0-9]</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"\\d&#123;1,&#125;"</span>, <span class="string">"0123456789"</span>));</span><br><span class="line"><span class="comment">// 匹配一个非数字字符。等价于[^0-9]</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"\\D&#123;1,&#125;"</span>, <span class="string">"0123456789"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配包括下划线的任何单词字符。类似但不等价于“[A-Za-z0-9_]”，这里的单词字符指的是Unicode字符集</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"\\w&#123;1,&#125;"</span>, <span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_"</span>));</span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"\\w&#123;1,&#125;"</span>, <span class="string">"~!@#$%^&amp;*()+`-=[]&#123;&#125;;:&lt;&gt;,./?|\\"</span>));</span><br><span class="line"><span class="comment">// 匹配任何非单词字符</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"\\W&#123;1,&#125;"</span>, <span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_"</span>));</span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"\\W&#123;1,&#125;"</span>, <span class="string">"~!@#$%^&amp;*()+`-=[]&#123;&#125;;:&lt;&gt;,./?|\\"</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匹配任何不可见字符，包括空格、制表符、换页符等等。等价于[ \f\n\r\t\v]</span></span><br><span class="line">Assert.assertTrue(checkMatches(<span class="string">"\\s&#123;1,&#125;"</span>, <span class="string">" \f\r\n\t"</span>));</span><br><span class="line"><span class="comment">// 匹配任何可见字符。等价于[^ \f\n\r\t\v]</span></span><br><span class="line">Assert.assertFalse(checkMatches(<span class="string">"\\S&#123;1,&#125;"</span>, <span class="string">" \f\r\n\t"</span>));</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_	matches： .&#123;1,&#125;</span><br><span class="line">~!@#$%^&amp;*()+`-=[]&#123;&#125;;:&lt;&gt;,./?|\\	matches： .&#123;1,&#125;</span><br><span class="line">\n	not matches： .</span><br><span class="line">\n	not matches： [^\n]</span><br><span class="line">0123456789	matches： \\d&#123;1,&#125;</span><br><span class="line">0123456789	not matches： \\D&#123;1,&#125;</span><br><span class="line">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_	matches： \\w&#123;1,&#125;</span><br><span class="line">~!@#$%^&amp;*()+`-=[]&#123;&#125;;:&lt;&gt;,./?|\\	not matches： \\w&#123;1,&#125;</span><br><span class="line">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_	not matches： \\W&#123;1,&#125;</span><br><span class="line">~!@#$%^&amp;*()+`-=[]&#123;&#125;;:&lt;&gt;,./?|\\	matches： \\W&#123;1,&#125;</span><br><span class="line"> \f\r\n\t	matches： \\s&#123;1,&#125;</span><br><span class="line"> \f\r\n\t	not matches： \\S&#123;1,&#125;</span><br></pre></td></tr></table></figure>
<h5 id="限制字符数量的等价字符">限制字符数量的等价字符</h5>
<p>在基本元字符章节中，已经介绍了限制字符数量的基本元字符 - <code>{}</code> 。</p>
<p>此外，还有 <code>*</code>、<code>+</code>、<code>?</code> 这个三个为了简化写法而出现的等价字符，我们来认识一下。</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*</code></td>
<td>匹配前面的子表达式零次或多次。等价于{0,}。</td>
</tr>
<tr>
<td><code>+</code></td>
<td>匹配前面的子表达式一次或多次。等价于{1,}。</td>
</tr>
<tr>
<td><code>?</code></td>
<td>匹配前面的子表达式零次或一次。等价于 {0,1}。</td>
</tr>
</tbody>
</table>
<p><strong>案例 限制字符数量的等价字符</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// *: 匹配前面的子表达式零次或多次。* 等价于&#123;0,&#125;。</span></span><br><span class="line">checkMatches(<span class="string">"ap*"</span>, <span class="string">"a"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap*"</span>, <span class="string">"ap"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap*"</span>, <span class="string">"app"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap*"</span>, <span class="string">"apppppppppp"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// +: 匹配前面的子表达式一次或多次。+ 等价于 &#123;1,&#125;。</span></span><br><span class="line">checkMatches(<span class="string">"ap+"</span>, <span class="string">"a"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap+"</span>, <span class="string">"ap"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap+"</span>, <span class="string">"app"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap+"</span>, <span class="string">"apppppppppp"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ?: 匹配前面的子表达式零次或一次。? 等价于 &#123;0,1&#125;。</span></span><br><span class="line">checkMatches(<span class="string">"ap?"</span>, <span class="string">"a"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap?"</span>, <span class="string">"ap"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap?"</span>, <span class="string">"app"</span>);</span><br><span class="line">checkMatches(<span class="string">"ap?"</span>, <span class="string">"apppppppppp"</span>);</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a	matches： ap*</span><br><span class="line">ap	matches： ap*</span><br><span class="line">app	matches： ap*</span><br><span class="line">apppppppppp	matches： ap*</span><br><span class="line">a	not matches： ap+</span><br><span class="line">ap	matches： ap+</span><br><span class="line">app	matches： ap+</span><br><span class="line">apppppppppp	matches： ap+</span><br><span class="line">a	matches： ap?</span><br><span class="line">ap	matches： ap?</span><br><span class="line">app	not matches： ap?</span><br><span class="line">apppppppppp	not matches： ap?</span><br></pre></td></tr></table></figure>
<h4 id="元字符优先级顺序">元字符优先级顺序</h4>
<p>正则表达式从左到右进行计算，并遵循优先级顺序，这与算术表达式非常类似。</p>
<p>下表从最高到最低说明了各种正则表达式运算符的优先级顺序：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>\</td>
<td>转义符</td>
</tr>
<tr>
<td>(), (?:), (?=), []</td>
<td>括号和中括号</td>
</tr>
<tr>
<td>*, +, ?, {n}, {n,}, {n,m}</td>
<td>限定符</td>
</tr>
<tr>
<td>^, $, *任何元字符、任何字符*</td>
<td>定位点和序列</td>
</tr>
<tr>
<td>|</td>
<td>替换</td>
</tr>
</tbody>
</table>
<p>字符具有高于替换运算符的优先级，使得“m|food”匹配“m”或“food”。若要匹配“mood”或“food”，请使用括号创建子表达式，从而产生“(m|f)ood”。</p>
<h3 id="分组构造">分组构造</h3>
<p>在基本元字符章节，提到了 <code>()</code> 字符可以用来对表达式分组。实际上分组还有更多复杂的用法。</p>
<p>所谓分组构造，是用来描述正则表达式的子表达式，用于捕获字符串中的子字符串。</p>
<h4 id="捕获与非捕获">捕获与非捕获</h4>
<p>下表为分组构造中的捕获和非捕获分类。</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>描述</th>
<th>捕获或非捕获</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>(exp)</code></td>
<td>匹配的子表达式</td>
<td>捕获</td>
</tr>
<tr>
<td><code>(?&lt;name&gt;exp)</code></td>
<td>命名的反向引用</td>
<td>捕获</td>
</tr>
<tr>
<td><code>(?:exp)</code></td>
<td>非捕获组</td>
<td>非捕获</td>
</tr>
<tr>
<td><code>(?=exp)</code></td>
<td>零宽度正预测先行断言</td>
<td>非捕获</td>
</tr>
<tr>
<td><code>(?!exp)</code></td>
<td>零宽度负预测先行断言</td>
<td>非捕获</td>
</tr>
<tr>
<td><code>(?&lt;=exp)</code></td>
<td>零宽度正回顾后发断言</td>
<td>非捕获</td>
</tr>
<tr>
<td><code>(?&lt;!exp)</code></td>
<td>零宽度负回顾后发断言</td>
<td>非捕获</td>
</tr>
</tbody>
</table>
<p>注：Java 正则引擎不支持平衡组。</p>
<h4 id="反向引用">反向引用</h4>
<h5 id="带编号的反向引用">带编号的反向引用</h5>
<p>带编号的反向引用使用以下语法：<code>\number</code></p>
<p>其中<em>number</em> 是正则表达式中捕获组的序号位置。 例如，\4 匹配第四个捕获组的内容。 如果正则表达式模式中未定义<em>number</em>，则将发生分析错误</p>
<p><strong>例 匹配重复的单词和紧随每个重复的单词的单词(不命名子表达式)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (\w+)\s\1\W(\w+) 匹配重复的单词和紧随每个重复的单词的单词</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"(\\w+)\\s\\1\\W(\\w+)"</span>,</span><br><span class="line">		<span class="string">"He said that that was the the correct answer."</span>) &gt; <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">regex = (\w+)\s\1\W(\w+), content: He said that that was the the correct answer.</span><br><span class="line">[1th] start: 8, end: 21, group: that that was</span><br><span class="line">[2th] start: 22, end: 37, group: the the correct</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong></p>
<p>(\w+): 匹配一个或多个单词字符。<br>
\s: 与空白字符匹配。<br>
\1: 匹配第一个组，即(\w+)。<br>
\W: 匹配包括空格和标点符号的一个非单词字符。 这样可以防止正则表达式模式匹配从第一个捕获组的单词开头的单词。</p>
<h5 id="命名的反向引用">命名的反向引用</h5>
<p>命名后向引用通过使用下面的语法进行定义：<code>\k&lt;name &gt;</code></p>
<p><strong>例 匹配重复的单词和紧随每个重复的单词的单词(命名子表达式)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (?&lt;duplicateWord&gt;\w+)\s\k&lt;duplicateWord&gt;\W(?&lt;nextWord&gt;\w+) 匹配重复的单词和紧随每个重复的单词的单词</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"(?&lt;duplicateWord&gt;\\w+)\\s\\k&lt;duplicateWord&gt;\\W(?&lt;nextWord&gt;\\w+)"</span>,</span><br><span class="line">		<span class="string">"He said that that was the the correct answer."</span>) &gt; <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">regex = (?&lt;duplicateWord&gt;\w+)\s\k&lt;duplicateWord&gt;\W(?&lt;nextWord&gt;\w+), content: He said that that was the the correct answer.</span><br><span class="line">[1th] start: 8, end: 21, group: that that was</span><br><span class="line">[2th] start: 22, end: 37, group: the the correct</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong></p>
<p>(?<duplicateword>\w+): 匹配一个或多个单词字符。 命名此捕获组 duplicateWord。<br>
\s: 与空白字符匹配。<br>
\k<duplicateword>: 匹配名为 duplicateWord 的捕获的组。<br>
\W: 匹配包括空格和标点符号的一个非单词字符。 这样可以防止正则表达式模式匹配从第一个捕获组的单词开头的单词。<br>
(?<nextword>\w+): 匹配一个或多个单词字符。 命名此捕获组 nextWord。</nextword></duplicateword></duplicateword></p>
<h4 id="非捕获组">非捕获组</h4>
<p><code>(?:exp)</code> 表示当一个限定符应用到一个组，但组捕获的子字符串并非所需时，通常会使用非捕获组构造。</p>
<p><strong>例 匹配以.结束的语句。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匹配由句号终止的语句。</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"(?:\\b(?:\\w+)\\W*)+\\."</span>, <span class="string">"This is a short sentence. Never end"</span>) &gt; <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">regex = (?:\b(?:\w+)\W*)+\., content: This is a short sentence. Never end</span><br><span class="line">[1th] start: 0, end: 25, group: This is a short sentence.</span><br></pre></td></tr></table></figure>
<h4 id="零宽断言">零宽断言</h4>
<p>用于查找在某些内容(但并不包括这些内容)之前或之后的东西，也就是说它们像\b,^,$那样用于指定一个位置，这个位置应该满足一定的条件(即断言)，因此它们也被称为零宽断言。</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>(?=exp)</code></td>
<td>匹配 exp 前面的位置</td>
</tr>
<tr>
<td><code>(?&lt;=exp)</code></td>
<td>匹配 exp 后面的位置</td>
</tr>
<tr>
<td><code>(?!exp)</code></td>
<td>匹配后面跟的不是 exp 的位置</td>
</tr>
<tr>
<td><code>(?&lt;!exp)</code></td>
<td>匹配前面不是 exp 的位置</td>
</tr>
</tbody>
</table>
<h5 id="匹配-exp-前面的位置">匹配 exp 前面的位置</h5>
<p><code>(?=exp)</code> 表示输入字符串必须匹配<em>子表达式</em>中的正则表达式模式，尽管匹配的子字符串未包含在匹配结果中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// \b\w+(?=\sis\b) 表示要捕获is之前的单词</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"\\b\\w+(?=\\sis\\b)"</span>, <span class="string">"The dog is a Malamute."</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertFalse(findAll(<span class="string">"\\b\\w+(?=\\sis\\b)"</span>, <span class="string">"The island has beautiful birds."</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertFalse(findAll(<span class="string">"\\b\\w+(?=\\sis\\b)"</span>, <span class="string">"The pitch missed home plate."</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"\\b\\w+(?=\\sis\\b)"</span>, <span class="string">"Sunday is a weekend day."</span>) &gt; <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">regex = \b\w+(?=\sis\b), content: The dog is a Malamute.</span><br><span class="line">[1th] start: 4, end: 7, group: dog</span><br><span class="line">regex = \b\w+(?=\sis\b), content: The island has beautiful birds.</span><br><span class="line">not found</span><br><span class="line">regex = \b\w+(?=\sis\b), content: The pitch missed home plate.</span><br><span class="line">not found</span><br><span class="line">regex = \b\w+(?=\sis\b), content: Sunday is a weekend day.</span><br><span class="line">[1th] start: 0, end: 6, group: Sunday</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong></p>
<p>\b: 在单词边界处开始匹配。</p>
<p>\w+: 匹配一个或多个单词字符。</p>
<p>(?=\sis\b): 确定单词字符是否后接空白字符和字符串“is”，其在单词边界处结束。 如果如此，则匹配成功。</p>
<h5 id="匹配-exp-后面的位置">匹配 exp 后面的位置</h5>
<p><code>(?&lt;=exp)</code> 表示子表达式不得在输入字符串当前位置左侧出现，尽管子表达式未包含在匹配结果中。零宽度正回顾后发断言不会回溯。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (?&lt;=\b20)\d&#123;2&#125;\b 表示要捕获以20开头的数字的后面部分</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"(?&lt;=\\b20)\\d&#123;2&#125;\\b"</span>, <span class="string">"2010 1999 1861 2140 2009"</span>) &gt; <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">regex = (?&lt;=\b20)\d&#123;2&#125;\b, content: 2010 1999 1861 2140 2009</span><br><span class="line">[1th] start: 2, end: 4, group: 10</span><br><span class="line">[2th] start: 22, end: 24, group: 09</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong></p>
<p>\d{2}: 匹配两个十进制数字。</p>
<p>{?&lt;=\b20): 如果两个十进制数字的字边界以小数位数“20”开头，则继续匹配。</p>
<p>\b: 在单词边界处结束匹配。</p>
<h5 id="匹配后面跟的不是-exp-的位置">匹配后面跟的不是 exp 的位置</h5>
<p><code>(?!exp)</code> 表示输入字符串不得匹配<em>子表达式</em>中的正则表达式模式，尽管匹配的子字符串未包含在匹配结果中。</p>
<p><strong>例 捕获未以“un”开头的单词</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// \b(?!un)\w+\b 表示要捕获未以“un”开头的单词</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"\\b(?!un)\\w+\\b"</span>, <span class="string">"unite one unethical ethics use untie ultimate"</span>) &gt; <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">regex = \b(?!un)\w+\b, content: unite one unethical ethics use untie ultimate</span><br><span class="line">[1th] start: 6, end: 9, group: one</span><br><span class="line">[2th] start: 20, end: 26, group: ethics</span><br><span class="line">[3th] start: 27, end: 30, group: use</span><br><span class="line">[4th] start: 37, end: 45, group: ultimate</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong></p>
<p>\b: 在单词边界处开始匹配。</p>
<p>(?!un): 确定接下来的两个的字符是否为“un”。 如果没有，则可能匹配。</p>
<p>\w+: 匹配一个或多个单词字符。</p>
<p>\b: 在单词边界处结束匹配。</p>
<h5 id="匹配前面不是-exp-的位置">匹配前面不是 exp 的位置</h5>
<p><code>(?&lt;!exp)</code> 表示子表达式不得在输入字符串当前位置的左侧出现。 但是，任何不匹配子表达式 的子字符串不包含在匹配结果中。</p>
<p><strong>例 捕获任意工作日</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (?&lt;!(Saturday|Sunday) )\b\w+ \d&#123;1,2&#125;, \d&#123;4&#125;\b 表示要捕获任意工作日（即周一到周五）</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"(?&lt;!(Saturday|Sunday) )\\b\\w+ \\d&#123;1,2&#125;, \\d&#123;4&#125;\\b"</span>, <span class="string">"Monday February 1, 2010"</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"(?&lt;!(Saturday|Sunday) )\\b\\w+ \\d&#123;1,2&#125;, \\d&#123;4&#125;\\b"</span>, <span class="string">"Wednesday February 3, 2010"</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertFalse(findAll(<span class="string">"(?&lt;!(Saturday|Sunday) )\\b\\w+ \\d&#123;1,2&#125;, \\d&#123;4&#125;\\b"</span>, <span class="string">"Saturday February 6, 2010"</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertFalse(findAll(<span class="string">"(?&lt;!(Saturday|Sunday) )\\b\\w+ \\d&#123;1,2&#125;, \\d&#123;4&#125;\\b"</span>, <span class="string">"Sunday February 7, 2010"</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"(?&lt;!(Saturday|Sunday) )\\b\\w+ \\d&#123;1,2&#125;, \\d&#123;4&#125;\\b"</span>, <span class="string">"Monday, February 8, 2010"</span>) &gt; <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">regex = (?&lt;!(Saturday|Sunday) )\b\w+ \d&#123;1,2&#125;, \d&#123;4&#125;\b, content: Monday February 1, 2010</span><br><span class="line">[1th] start: 7, end: 23, group: February 1, 2010</span><br><span class="line">regex = (?&lt;!(Saturday|Sunday) )\b\w+ \d&#123;1,2&#125;, \d&#123;4&#125;\b, content: Wednesday February 3, 2010</span><br><span class="line">[1th] start: 10, end: 26, group: February 3, 2010</span><br><span class="line">regex = (?&lt;!(Saturday|Sunday) )\b\w+ \d&#123;1,2&#125;, \d&#123;4&#125;\b, content: Saturday February 6, 2010</span><br><span class="line">not found</span><br><span class="line">regex = (?&lt;!(Saturday|Sunday) )\b\w+ \d&#123;1,2&#125;, \d&#123;4&#125;\b, content: Sunday February 7, 2010</span><br><span class="line">not found</span><br><span class="line">regex = (?&lt;!(Saturday|Sunday) )\b\w+ \d&#123;1,2&#125;, \d&#123;4&#125;\b, content: Monday, February 8, 2010</span><br><span class="line">[1th] start: 8, end: 24, group: February 8, 2010</span><br></pre></td></tr></table></figure>
<h3 id="贪婪与懒惰">贪婪与懒惰</h3>
<p>当正则表达式中包含能接受重复的限定符时，通常的行为是（在使整个表达式能得到匹配的前提下）匹配<strong>尽可能多</strong>的字符。以这个表达式为例：a.*b，它将会匹配最长的以 a 开始，以 b 结束的字符串。如果用它来搜索 aabab 的话，它会匹配整个字符串 aabab。这被称为贪婪匹配。</p>
<p>有时，我们更需要懒惰匹配，也就是匹配<strong>尽可能少</strong>的字符。前面给出的限定符都可以被转化为懒惰匹配模式，只要在它后面加上一个问号?。这样.*?就意味着匹配任意数量的重复，但是在能使整个匹配成功的前提下使用最少的重复。</p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*?</code></td>
<td>重复任意次，但尽可能少重复</td>
</tr>
<tr>
<td><code>+?</code></td>
<td>重复 1 次或更多次，但尽可能少重复</td>
</tr>
<tr>
<td><code>??</code></td>
<td>重复 0 次或 1 次，但尽可能少重复</td>
</tr>
<tr>
<td><code>{n,m}?</code></td>
<td>重复 n 到 m 次，但尽可能少重复</td>
</tr>
<tr>
<td><code>{n,}?</code></td>
<td>重复 n 次以上，但尽可能少重复</td>
</tr>
</tbody>
</table>
<p><strong>例 Java 正则中贪婪与懒惰的示例</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 贪婪匹配</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"a\\w*b"</span>, <span class="string">"abaabaaabaaaab"</span>) &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 懒惰匹配</span></span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"a\\w*?b"</span>, <span class="string">"abaabaaabaaaab"</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"a\\w+?b"</span>, <span class="string">"abaabaaabaaaab"</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"a\\w??b"</span>, <span class="string">"abaabaaabaaaab"</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"a\\w&#123;0,4&#125;?b"</span>, <span class="string">"abaabaaabaaaab"</span>) &gt; <span class="number">0</span>);</span><br><span class="line">Assert.assertTrue(findAll(<span class="string">"a\\w&#123;3,&#125;?b"</span>, <span class="string">"abaabaaabaaaab"</span>) &gt; <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p><strong>输出</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">regex = a\w*b, content: abaabaaabaaaab</span><br><span class="line">[1th] start: 0, end: 14, group: abaabaaabaaaab</span><br><span class="line">regex = a\w*?b, content: abaabaaabaaaab</span><br><span class="line">[1th] start: 0, end: 2, group: ab</span><br><span class="line">[2th] start: 2, end: 5, group: aab</span><br><span class="line">[3th] start: 5, end: 9, group: aaab</span><br><span class="line">[4th] start: 9, end: 14, group: aaaab</span><br><span class="line">regex = a\w+?b, content: abaabaaabaaaab</span><br><span class="line">[1th] start: 0, end: 5, group: abaab</span><br><span class="line">[2th] start: 5, end: 9, group: aaab</span><br><span class="line">[3th] start: 9, end: 14, group: aaaab</span><br><span class="line">regex = a\w??b, content: abaabaaabaaaab</span><br><span class="line">[1th] start: 0, end: 2, group: ab</span><br><span class="line">[2th] start: 2, end: 5, group: aab</span><br><span class="line">[3th] start: 6, end: 9, group: aab</span><br><span class="line">[4th] start: 11, end: 14, group: aab</span><br><span class="line">regex = a\w&#123;0,4&#125;?b, content: abaabaaabaaaab</span><br><span class="line">[1th] start: 0, end: 2, group: ab</span><br><span class="line">[2th] start: 2, end: 5, group: aab</span><br><span class="line">[3th] start: 5, end: 9, group: aaab</span><br><span class="line">[4th] start: 9, end: 14, group: aaaab</span><br><span class="line">regex = a\w&#123;3,&#125;?b, content: abaabaaabaaaab</span><br><span class="line">[1th] start: 0, end: 5, group: abaab</span><br><span class="line">[2th] start: 5, end: 14, group: aaabaaaab</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong></p>
<p>本例中代码展示的是使用不同贪婪或懒惰策略去查找字符串&quot;abaabaaabaaaab&quot; 中匹配<strong>以&quot;a&quot;开头，以&quot;b&quot;结尾的所有子字符串</strong>。</p>
<p>请从输出结果中，细细体味使用不同的贪婪或懒惰策略，对于匹配子字符串有什么影响。</p>
<h3 id="附录">附录</h3>
<h4 id="匹配正则字符串的方法">匹配正则字符串的方法</h4>
<p>由于正则表达式中很多元字符本身就是转义字符，在 Java 字符串的规则中不会被显示出来。</p>
<p>为此，可以使用一个工具类<code>org.apache.commons.lang3.StringEscapeUtils</code>来做特殊处理，使得转义字符可以打印。这个工具类提供的都是静态方法，从方法命名大致也可以猜出用法，这里不多做说明。</p>
<p>如果你了解 maven，可以直接引入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;commons-lang3.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>本文为了展示正则匹配规则用到的方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">checkMatches</span><span class="params">(String regex, String content)</span> </span>&#123;</span><br><span class="line">	Pattern p = Pattern.compile(regex);</span><br><span class="line">	Matcher m = p.matcher(content);</span><br><span class="line">	<span class="keyword">boolean</span> flag = m.matches();</span><br><span class="line">	<span class="keyword">if</span> (m.matches()) &#123;</span><br><span class="line">		System.out.println(StringEscapeUtils.escapeJava(content) + <span class="string">"\tmatches： "</span> + StringEscapeUtils.escapeJava(regex));</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		System.out.println(StringEscapeUtils.escapeJava(content) + <span class="string">"\tnot matches： "</span> + StringEscapeUtils.escapeJava(regex));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findAll</span><span class="params">(String regex, String content)</span> </span>&#123;</span><br><span class="line">	Pattern p = Pattern.compile(regex);</span><br><span class="line">	Matcher m = p.matcher(content);</span><br><span class="line">	System.out.println(<span class="string">"regex = "</span> + regex + <span class="string">", content: "</span> + content);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">		count++;</span><br><span class="line">		System.out.println(<span class="string">"["</span> + count + <span class="string">"th] "</span> + <span class="string">"start: "</span> + m.start() + <span class="string">", end: "</span> + m.end()</span><br><span class="line">				+ <span class="string">", group: "</span> + m.group());</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (<span class="number">0</span> == count) &#123;</span><br><span class="line">		System.out.println(<span class="string">"not found"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="速查元字符字典">速查元字符字典</h4>
<p>为了方便快查正则的元字符含义，在本节根据元字符的功能集中罗列正则的各种元字符。</p>
<h5 id="限定符">限定符</h5>
<table>
<thead>
<tr>
<th>字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*</code></td>
<td>匹配前面的子表达式零次或多次。例如，zo* 能匹配 “z” 以及 “zoo”。* 等价于{0,}。</td>
</tr>
<tr>
<td><code>+</code></td>
<td>匹配前面的子表达式一次或多次。例如，‘zo+’ 能匹配 “zo” 以及 “zoo”，但不能匹配 “z”。+ 等价于 {1,}。</td>
</tr>
<tr>
<td><code>?</code></td>
<td>匹配前面的子表达式零次或一次。例如，“do(es)?” 可以匹配 “do” 或 “does” 中的&quot;do&quot; 。? 等价于 {0,1}。</td>
</tr>
<tr>
<td><code>{n}</code></td>
<td>n 是一个非负整数。匹配确定的 n 次。例如，‘o{2}’ 不能匹配 “Bob” 中的 ‘o’，但是能匹配 “food” 中的两个 o。</td>
</tr>
<tr>
<td><code>{n,}</code></td>
<td>n 是一个非负整数。至少匹配 n 次。例如，‘o{2,}’ 不能匹配 “Bob” 中的 ‘o’，但能匹配 “foooood” 中的所有 o。‘o{1,}’ 等价于 ‘o+’。‘o{0,}’ 则等价于 ‘o*’。</td>
</tr>
<tr>
<td><code>{n,m}</code></td>
<td>m 和 n 均为非负整数，其中 n &lt;= m。最少匹配 n 次且最多匹配 m 次。例如，“o{1,3}” 将匹配 “fooooood” 中的前三个 o。‘o{0,1}’ 等价于 ‘o?’。请注意在逗号和两个数之间不能有空格。</td>
</tr>
</tbody>
</table>
<h5 id="定位符">定位符</h5>
<table>
<thead>
<tr>
<th>字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>^</code></td>
<td>匹配输入字符串开始的位置。如果设置了 RegExp 对象的 Multiline 属性，^ 还会与 \n 或 \r 之后的位置匹配。</td>
</tr>
<tr>
<td><code>$</code></td>
<td>匹配输入字符串结尾的位置。如果设置了 RegExp 对象的 Multiline 属性，$ 还会与 \n 或 \r 之前的位置匹配。</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>匹配一个字边界，即字与空格间的位置。</td>
</tr>
<tr>
<td><code>\B</code></td>
<td>非字边界匹配。</td>
</tr>
</tbody>
</table>
<h5 id="非打印字符">非打印字符</h5>
<table>
<thead>
<tr>
<th>字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\cx</code></td>
<td>匹配由 x 指明的控制字符。例如， \cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 ‘c’ 字符。</td>
</tr>
<tr>
<td><code>\f</code></td>
<td>匹配一个换页符。等价于 \x0c 和 \cL。</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>匹配一个换行符。等价于 \x0a 和 \cJ。</td>
</tr>
<tr>
<td><code>\r</code></td>
<td>匹配一个回车符。等价于 \x0d 和 \cM。</td>
</tr>
<tr>
<td><code>\s</code></td>
<td>匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。</td>
</tr>
<tr>
<td><code>\S</code></td>
<td>匹配任何非空白字符。等价于 [ \f\n\r\t\v]。</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>匹配一个制表符。等价于 \x09 和 \cI。</td>
</tr>
<tr>
<td><code>\v</code></td>
<td>匹配一个垂直制表符。等价于 \x0b 和 \cK。</td>
</tr>
</tbody>
</table>
<h5 id="分组">分组</h5>
<table>
<thead>
<tr>
<th>表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>(exp)</code></td>
<td>匹配的子表达式。()中的内容就是子表达式。</td>
</tr>
<tr>
<td><code>(?&lt;name&gt;exp)</code></td>
<td>命名的子表达式（反向引用）。</td>
</tr>
<tr>
<td><code>(?:exp)</code></td>
<td>非捕获组，表示当一个限定符应用到一个组，但组捕获的子字符串并非所需时，通常会使用非捕获组构造。</td>
</tr>
<tr>
<td><code>(?=exp)</code></td>
<td>匹配 exp 前面的位置。</td>
</tr>
<tr>
<td><code>(?&lt;=exp)</code></td>
<td>匹配 exp 后面的位置。</td>
</tr>
<tr>
<td><code>(?!exp)</code></td>
<td>匹配后面跟的不是 exp 的位置。</td>
</tr>
<tr>
<td><code>(?&lt;!exp)</code></td>
<td>匹配前面不是 exp 的位置。</td>
</tr>
</tbody>
</table>
<h5 id="特殊符号">特殊符号</h5>
<table>
<thead>
<tr>
<th>字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\</code></td>
<td>将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， ‘n’ 匹配字符 ‘n’。’\n’ 匹配换行符。序列 ‘\’ 匹配 “”，而 ‘(’ 则匹配 “(”。</td>
</tr>
<tr>
<td><code>\|</code></td>
<td>指明两项之间的一个选择。</td>
</tr>
<tr>
<td><code>[]</code></td>
<td>匹配方括号范围内的任意一个字符。形式如：[xyz]、[^xyz]、[a-z]、[^a-z]、[x,y,z]</td>
</tr>
</tbody>
</table>
<h2 id="正则应用">正则应用</h2>
<p>虽然本系列洋洋洒洒的大谈特谈正则表达式。但是我还是要在这里建议，如果一个正则表达式没有经过充分测试，还是要谨慎使用。</p>
<p>正则是把双刃剑，它可以为你节省大量的代码行。但是由于它不易阅读，维护起来可是头疼的哦（你需要一个字符一个字符的去理解）。</p>
<h3 id="最实用的正则">最实用的正则</h3>
<h4 id="校验中文">校验中文</h4>
<p>**描述：**校验字符串中只能有中文字符（不包括中文标点符号）。中文字符的 Unicode 编码范围是\u4e00 到 \u9fa5。</p>
<p>如有兴趣，可以参考<a href="http://baike.baidu.com/link?url=3xi0vmvCIGKQLJZdn_BYhQ1IDFsoSJMrya6_eOjCBb7A6cRIW-zhZFLC9Yh8wjxU6A_HCfNuP8FBBXU9CN3Wcq" target="_blank" rel="noopener"><strong><em>百度百科-Unicode</em></strong></a> 。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^[\u4e00-\u9fa5]+$</span><br></pre></td></tr></table></figure>
<p><strong>匹配：</strong> 春眠不觉晓</p>
<p>**不匹配：**春眠不觉晓，</p>
<h4 id="校验身份证号码">校验身份证号码</h4>
<p>**描述：**身份证为 15 位或 18 位。15 位是第一代身份证。从 1999 年 10 月 1 日起，全国实行公民身份证号码制度，居民身份证编号由原 15 位升至 18 位。</p>
<p><strong>15 位身份证</strong></p>
<p>**描述：**由 15 位数字组成。排列顺序从左至右依次为：六位数字地区码；六位数字出生日期；三位顺序号，其中 15 位男为单数，女为双数。</p>
<p><strong>18 位身份证</strong></p>
<p>**描述：**由十七位数字本体码和一位数字校验码组成。排列顺序从左至右依次为：六位数字地区码；八位数字出生日期；三位数字顺序码和一位数字校验码（也可能是 X）。</p>
<p>身份证号含义详情请见：<a href="http://baike.baidu.com/link?url=5mYlYNE0RsSe2D4tydajtiaR8hAm4pPZ0FHSPuQ05N4f6H-i7qPuw7sY5KfNuiOVJWVWZvU4gf3IY-vIcKdP1CU4Fv-9pKmFQB50qGv_hZT2dkGbkd9--8_saY7omV80vEw9ixVeEwda37fHswfmtyU4QSiBG5s3K5K-JnYr1dqNlPu0f3t008UcLh5-wyID" target="_blank" rel="noopener"><strong><em>百度百科-居民身份证号码</em></strong></a></p>
<p><strong>地区码（6 位）</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(1[1-5]|2[1-3]|3[1-7]|4[1-3]|5[0-4]|6[1-5])\d&#123;4&#125;</span><br></pre></td></tr></table></figure>
<p><strong>出生日期（8 位）</strong></p>
<p>注：下面的是 18 位身份证的有效出生日期，如果是 15 位身份证，只要将第一个\d{4}改为\d{2}即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((\d&#123;4&#125;((0[13578]|1[02])(0[1-9]|[12]\d|3[01])|(0[13456789]|1[012])(0[1-9]|[12]\d|30)|02(0[1-9]|1\d|2[0-8])))|([02468][048]|[13579][26])0229)</span><br></pre></td></tr></table></figure>
<p><strong>15 位有效身份证</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^((1[1-5]|2[1-3]|3[1-7]|4[1-3]|5[0-4]|6[1-5])\d&#123;4&#125;)((\d&#123;2&#125;((0[13578]|1[02])(0[1-9]|[12]\d|3[01])|(0[13456789]|1[012])(0[1-9]|[12]\d|30)|02(0[1-9]|1\d|2[0-8])))|([02468][048]|[13579][26])0229)(\d&#123;3&#125;)$</span><br></pre></td></tr></table></figure>
<p>**匹配：**110001700101031</p>
<p>**不匹配：**110001701501031</p>
<p><strong>18 位有效身份证</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^((1[1-5]|2[1-3]|3[1-7]|4[1-3]|5[0-4]|6[1-5])\d&#123;4&#125;)((\d&#123;4&#125;((0[13578]|1[02])(0[1-9]|[12]\d|3[01])|(0[13456789]|1[012])(0[1-9]|[12]\d|30)|02(0[1-9]|1\d|2[0-8])))|([02468][048]|[13579][26])0229)(\d&#123;3&#125;(\d|X))$</span><br></pre></td></tr></table></figure>
<p>**匹配：**110001199001010310 | 11000019900101015X</p>
<p>**不匹配：**990000199001010310 | 110001199013010310</p>
<h4 id="校验有效用户名-密码">校验有效用户名、密码</h4>
<p>**描述：**长度为 6-18 个字符，允许输入字母、数字、下划线，首字符必须为字母。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^[a-zA-Z]\w&#123;5,17&#125;$</span><br></pre></td></tr></table></figure>
<p>**匹配：**he_llo@worl.d.com | <a href="mailto:hel.l-o@wor-ld.museum" target="_blank" rel="noopener">hel.l-o@wor-ld.museum</a> | <a href="mailto:h1ello@123.com" target="_blank" rel="noopener">h1ello@123.com</a></p>
<p>**不匹配：**hello@worl_d.com | he&amp;llo@world.co1 | .hello@wor#.co.uk</p>
<h4 id="校验邮箱">校验邮箱</h4>
<p>**描述：**不允许使用 IP 作为域名，如 : <a href="mailto:hello@154.145.68.12" target="_blank" rel="noopener">hello@154.145.68.12</a></p>
<p><code>@</code>符号前的邮箱用户和<code>.</code>符号前的域名(domain)必须满足以下条件：</p>
<ul>
<li>字符只能是英文字母、数字、下划线<code>_</code>、<code>.</code>、<code>-</code> ；</li>
<li>首字符必须为字母或数字；</li>
<li><code>_</code>、<code>.</code>、<code>-</code> 不能连续出现。</li>
</ul>
<p>域名的根域只能为字母，且至少为两个字符。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^[A-Za-z0-9](([_\.\-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([\.\-]?[a-zA-Z0-9]+)*)\.([A-Za-z]&#123;2,&#125;)$</span><br></pre></td></tr></table></figure>
<p>**匹配：**he_llo@worl.d.com | <a href="mailto:hel.l-o@wor-ld.museum" target="_blank" rel="noopener">hel.l-o@wor-ld.museum</a> | <a href="mailto:h1ello@123.com" target="_blank" rel="noopener">h1ello@123.com</a></p>
<p>**不匹配：**hello@worl_d.com | he&amp;llo@world.co1 | .hello@wor#.co.uk</p>
<h4 id="校验-url">校验 URL</h4>
<p>**描述：**校验 URL。支持 http、https、ftp、ftps。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^(ht|f)(tp|tps)\://[a-zA-Z0-9\-\.]+\.([a-zA-Z]&#123;2,3&#125;)?(/\S*)?$</span><br></pre></td></tr></table></figure>
<p>**匹配：**<a href="http://google.com/help/me" target="_blank" rel="noopener">http://google.com/help/me</a> | <a href="http://www.google.com/help/me/" target="_blank" rel="noopener">http://www.google.com/help/me/</a> | <a href="https://www.google.com/help.asp" target="_blank" rel="noopener">https://www.google.com/help.asp</a> | <a href="ftp://www.google.com" target="_blank" rel="noopener">ftp://www.google.com</a> | ftps://google.org</p>
<p>**不匹配：**<a href="http://un/www.google.com/index.asp" target="_blank" rel="noopener">http://un/www.google.com/index.asp</a></p>
<h4 id="校验时间">校验时间</h4>
<p>**描述：**校验时间。时、分、秒必须是有效数字，如果数值不是两位数，十位需要补零。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^([0-1][0-9]|[2][0-3]):([0-5][0-9])$</span><br></pre></td></tr></table></figure>
<p>**匹配：**00:00:00 | 23:59:59 | 17:06:30</p>
<p>**不匹配：**17:6:30 | 24:16:30</p>
<h4 id="校验日期">校验日期</h4>
<p>**描述：**校验日期。日期满足以下条件：</p>
<ul>
<li>格式 yyyy-MM-dd 或 yyyy-M-d</li>
<li>连字符可以没有或是“-”、“/”、“.”之一</li>
<li>闰年的二月可以有 29 日；而平年不可以。</li>
<li>一、三、五、七、八、十、十二月为 31 日。四、六、九、十一月为 30 日。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^(?:(?!0000)[0-9]&#123;4&#125;([-/.]?)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]&#123;2&#125;(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))$</span><br></pre></td></tr></table></figure>
<p>**匹配：**2016/1/1 | 2016/01/01 | 20160101 | 2016-01-01 | 2016.01.01 | 2000-02-29</p>
<p>**不匹配：**2001-02-29 | 2016/12/32 | 2016/6/31 | 2016/13/1 | 2016/0/1</p>
<h4 id="校验中国手机号码">校验中国手机号码</h4>
<p>**描述：**中国手机号码正确格式：11 位数字。</p>
<p>移动有 16 个号段：134、135、136、137、138、139、147、150、151、152、157、158、159、182、187、188。其中 147、157、188 是 3G 号段，其他都是 2G 号段。联通有 7 种号段：130、131、132、155、156、185、186。其中 186 是 3G（WCDMA）号段，其余为 2G 号段。电信有 4 个号段：133、153、180、189。其中 189 是 3G 号段（CDMA2000），133 号段主要用作无线网卡号。总结：13 开头手机号 0-9；15 开头手机号 0-3、5-9；18 开头手机号 0、2、5-9。</p>
<p>此外，中国在国际上的区号为 86，所以手机号开头有+86、86 也是合法的。</p>
<p>以上信息来源于 <a href="http://baike.baidu.com/link?url=Bia2K_f8rGcakOlP4d9m_-DNSgXU5-0NDP0pPavS0ZbhRHQcUFUTbMERjdO4u7cvkpTJaIDeUXq_EXWnMqXMdSuMQDX3NAbZXAlZYl_V18KATWF7y1EFzUyJ62rf3bAN" target="_blank" rel="noopener"><strong><em>百度百科-手机号</em></strong></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^((\+)?86\s*)?((13[0-9])|(15([0-3]|[5-9]))|(18[0,2,5-9]))\d&#123;8&#125;$</span><br></pre></td></tr></table></figure>
<p><strong>匹配：</strong>+86 18012345678 | 86 18012345678 | 15812345678</p>
<p>**不匹配：**15412345678 | 12912345678 | 180123456789</p>
<h4 id="校验中国固话号码">校验中国固话号码</h4>
<p>**描述：**固话号码，必须加区号（以 0 开头）。<br>
3 位有效区号：010、020~029，固话位数为 8 位。<br>
4 位有效区号：03xx 开头到 09xx，固话位数为 7。</p>
<p>如果想了解更详细的信息，请参考 <a href="http://baike.baidu.com/link?url=sX8JoxK1ja5uM5pDYvQe27_QsyqAZ_78DLSeEvwjqtG_uXqU6p5Oh7CPbImNbnwu1ClOmD8udgDIswZfYzQIw0z3BYZO3eTplvVDzieuowTYqt7yHGDAqyT7o4vvGhg4" target="_blank" rel="noopener"><strong><em>百度百科-电话区号</em></strong></a> 。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^(010|02[0-9])(\s|-)\d&#123;8&#125;|(0[3-9]\d&#123;2&#125;)(\s|-)\d&#123;7&#125;$</span><br></pre></td></tr></table></figure>
<p>**匹配：**010-12345678 | 010 12345678 | 0512-1234567 | 0512 1234567</p>
<p>**不匹配：**1234567 | 12345678</p>
<h4 id="校验-ipv4-地址">校验 IPv4 地址</h4>
<p>**描述：**IP 地址是一个 32 位的二进制数，通常被分割为 4 个“8 位二进制数”（也就是 4 个字节）。IP 地址通常用“点分十进制”表示成（a.b.c.d）的形式，其中，a,b,c,d 都是 0~255 之间的十进制整数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^([01]?\d\d?|2[0-4]\d|25[0-5])\.([01]?\d\d?|2[0-4]\d|25[0-5])\.([01]?\d\d?|2[0-4]\d|25[0-5])\.([01]?\d\d?|2[0-4]\d|25[0-5])$</span><br></pre></td></tr></table></figure>
<p>**匹配：**0.0.0.0 | 255.255.255.255 | 127.0.0.1</p>
<p>**不匹配：**10.10.10 | 10.10.10.256</p>
<h4 id="校验-ipv6-地址">校验 IPv6 地址</h4>
<p>**描述：**IPv6 的 128 位地址通常写成 8 组，每组为四个十六进制数的形式。</p>
<p>IPv6 地址可以表示为以下形式：</p>
<ul>
<li>IPv6 地址</li>
<li>零压缩 IPv6 地址(<a href="https://tools.ietf.org/html/rfc5952#section-2.2" target="_blank" rel="noopener">section 2.2 of rfc5952</a>)</li>
<li>带有本地链接区域索引的 IPv6 地址 (<a href="https://tools.ietf.org/html/rfc4007#section-11" target="_blank" rel="noopener">section 11 of rfc4007</a>)</li>
<li>嵌入 IPv4 的 IPv6 地址(<a href="https://tools.ietf.org/html/rfc6052#section-2" target="_blank" rel="noopener">section 2 of rfc6052</a></li>
<li>映射 IPv4 的 IPv6 地址 (<a href="https://tools.ietf.org/html/rfc2765#section-2.1" target="_blank" rel="noopener">section 2.1 of rfc2765</a>)</li>
<li>翻译 IPv4 的 IPv6 地址 (<a href="https://tools.ietf.org/html/rfc2765#section-2.1" target="_blank" rel="noopener">section 2.1 of rfc2765</a>)</li>
</ul>
<p>显然，IPv6 地址的表示方式很复杂。你也可以参考</p>
<p><a href="http://baike.baidu.com/link?url=D3nmh0q_G_ZVmxXFG79mjjNfT4hs9fwjqUgygh-tvhq43KYqx88HV27WEXmoT4nA4iGzXwXMm5L-j50C2gSL5q" target="_blank" rel="noopener"><strong><em>百度百科-IPv6</em></strong></a></p>
<p><a href="http://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses" target="_blank" rel="noopener"><strong><em>Stack overflow 上的 IPv6 正则表达高票答案</em></strong></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(([0-9a-fA-F]&#123;1,4&#125;:)&#123;7,7&#125;[0-9a-fA-F]&#123;1,4&#125;|([0-9a-fA-F]&#123;1,4&#125;:)&#123;1,7&#125;:|([0-9a-fA-F]&#123;1,4&#125;:)&#123;1,6&#125;:[0-9a-fA-F]&#123;1,4&#125;|([0-9a-fA-F]&#123;1,4&#125;:)&#123;1,5&#125;(:[0-9a-fA-F]&#123;1,4&#125;)&#123;1,2&#125;|([0-9a-fA-F]&#123;1,4&#125;:)&#123;1,4&#125;(:[0-9a-fA-F]&#123;1,4&#125;)&#123;1,3&#125;|([0-9a-fA-F]&#123;1,4&#125;:)&#123;1,3&#125;(:[0-9a-fA-F]&#123;1,4&#125;)&#123;1,4&#125;|([0-9a-fA-F]&#123;1,4&#125;:)&#123;1,2&#125;(:[0-9a-fA-F]&#123;1,4&#125;)&#123;1,5&#125;|[0-9a-fA-F]&#123;1,4&#125;:((:[0-9a-fA-F]&#123;1,4&#125;)&#123;1,6&#125;)|:((:[0-9a-fA-F]&#123;1,4&#125;)&#123;1,7&#125;|:)|fe80:(:[0-9a-fA-F]&#123;0,4&#125;)&#123;0,4&#125;%[0-9a-zA-Z]&#123;1,&#125;|::(ffff(:0&#123;1,4&#125;)&#123;0,1&#125;:)&#123;0,1&#125;((25[0-5]|(2[0-4]|1&#123;0,1&#125;[0-9])&#123;0,1&#125;[0-9])\.)&#123;3,3&#125;(25[0-5]|(2[0-4]|1&#123;0,1&#125;[0-9])&#123;0,1&#125;[0-9])|([0-9a-fA-F]&#123;1,4&#125;:)&#123;1,4&#125;:((25[0-5]|(2[0-4]|1&#123;0,1&#125;[0-9])&#123;0,1&#125;[0-9])\.)&#123;3,3&#125;(25[0-5]|(2[0-4]|1&#123;0,1&#125;[0-9])&#123;0,1&#125;[0-9]))</span><br></pre></td></tr></table></figure>
<p>**匹配：**1:2:3:4:5:6:7:8 | 1:: | 1::8 | 1::6:7:8 | 1::5:6:7:8 | 1::4:5:6:7:8 | 1::3:4:5:6:7:8 | ::2:3:4:5:6:7:8 | 1:2:3:4:5:6:7:: | 1:2:3:4:5:6::8 | 1:2:3:4:5::8 | 1:2:3:4::8 | 1:2:3::8 | 1:2::8 | 1::8 | ::8 | fe80::7:8%1 | ::255.255.255.255 | 2001:db8:3:4::192.0.2.33 | 64:ff9b::192.0.2.33</p>
<p>**不匹配：**1.2.3.4.5.6.7.8 | 1::2::3</p>
<h3 id="特定字符">特定字符</h3>
<p>匹配长度为 3 的字符串：<code>^.{3}$</code>。</p>
<p>匹配由 26 个英文字母组成的字符串：<code>^[A-Za-z]+$</code>。</p>
<p>匹配由 26 个大写英文字母组成的字符串：<code>^[A-Z]+$</code>。</p>
<p>匹配由 26 个小写英文字母组成的字符串：<code>^[a-z]+$</code>。</p>
<p>匹配由数字和 26 个英文字母组成的字符串：<code>^[A-Za-z0-9]+$</code>。</p>
<p>匹配由数字、26 个英文字母或者下划线组成的字符串：<code>^\w+$</code>。</p>
<h3 id="特定数字">特定数字</h3>
<p>匹配正整数：<code>^[1-9]\d*$</code></p>
<p>匹配负整数：<code>^-[1-9]\d*$</code></p>
<p>匹配整数：<code>^(-?[1-9]\d*)|0$</code></p>
<p>匹配正浮点数：<code>^[1-9]\d*\.\d+|0\.\d+$</code></p>
<p>匹配负浮点数：<code>^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$</code></p>
<p>匹配浮点数：<code>^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$</code></p>
<h2 id="参考">参考</h2>
<ul>
<li><a href="http://deerchao.net/tutorials/regex/regex.htm" target="_blank" rel="noopener">正则表达式 30 分钟入门教程</a></li>
<li><a href="https://msdn.microsoft.com/zh-cn/library/d9eze55x(v=vs.80).aspx" target="_blank" rel="noopener">msdn 正则表达式教程</a></li>
<li><a href="http://blog.csdn.net/lxcnn/article/details/4362500" target="_blank" rel="noopener">正则应用之——日期正则表达式</a></li>
<li><a href="http://www.regexlib.com/" target="_blank" rel="noopener">http://www.regexlib.com/</a></li>
</ul>

                

                <hr>
                <span style="color: #bfbfbf!important;">版权声明：本文为博主原创文章，欢迎转载，转载请注明作者、原文超链接</span>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/article/javacore/advanced/Annotation/" data-toggle="tooltip" data-placement="top" title="[java核心技术] Java注解">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/article/javacore/advanced/encode/java-message-digest/" data-toggle="tooltip" data-placement="top" title="[编码算法] 消息摘要算法">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <br>

                <!--打赏-->
                
                    <div class="reward">
                        <div class="reward-button">赏 <span class="reward-code"> 
                            <span class="alipay-code"> <img class="alipay-img" src="/img/alipay_url.png"><b>支付宝打赏</b></span> 
                            <span class="wechat-code"> <img class="wechat-img" src="/img/wechatpay_url.png"><b>微信打赏</b> </span>
                            </span></div>
                        <p class="reward-notice">赞赏一下</p>
                    </div>
                
                <!--打赏-->
                <br>

                <!--分享-->
                
                    <div class="social-share"  data-wechat-qrcode-helper="" align="center"></div>
                    <!--  css & js -->
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!--分享-->
                <br>   
                
                <!-- require APlayer -->
                
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
                <script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script>

                <div class="aplayer"
                    data-id="2576984498"
                    data-server="tecent"
                    data-type="playlist"
                    data-fixed="true" 
                    >
                </div>
                

                <!-- duoshuo Share start -->
                
                <!-- 多说 Share end-->

                <!-- 多说评论框 start -->
                
                <!-- 多说评论框 end -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->

                
                    <!-- disqus 评论框 start -->
                    <div class="comment">
                        <div id="lv-container" data-id="city" data-uid="MTAyMC80MTg2NC8xODQxMA=="></div>
                    </div>
                    <!-- disqus 评论框 end -->
                

            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

  
    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#导读"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">&#x5BFC;&#x8BFB;</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#招式篇"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">&#x62DB;&#x5F0F;&#x7BC7;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#pattern-类"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">Pattern &#x7C7B;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#matcher-类"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">Matcher &#x7C7B;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#校验文本是否与正则规则匹配"><span class="toc-nav-number">2.2.1.</span> <span class="toc-nav-text">&#x6821;&#x9A8C;&#x6587;&#x672C;&#x662F;&#x5426;&#x4E0E;&#x6B63;&#x5219;&#x89C4;&#x5219;&#x5339;&#x914D;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#案例lookingat-vs-find-vs-matches"><span class="toc-nav-number">2.2.1.1.</span> <span class="toc-nav-text">&#x6848;&#x4F8B;&#xFF1A;lookingAt vs find vs matches</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#查找匹配正则规则的文本位置"><span class="toc-nav-number">2.2.2.</span> <span class="toc-nav-text">&#x67E5;&#x627E;&#x5339;&#x914D;&#x6B63;&#x5219;&#x89C4;&#x5219;&#x7684;&#x6587;&#x672C;&#x4F4D;&#x7F6E;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#案例使用-start-end-group-查找所有匹配正则条件的子序列"><span class="toc-nav-number">2.2.2.1.</span> <span class="toc-nav-text">&#x6848;&#x4F8B;&#xFF1A;&#x4F7F;&#x7528; start()&#x3001;end()&#x3001;group() &#x67E5;&#x627E;&#x6240;&#x6709;&#x5339;&#x914D;&#x6B63;&#x5219;&#x6761;&#x4EF6;&#x7684;&#x5B50;&#x5E8F;&#x5217;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#替换匹配正则规则的文本"><span class="toc-nav-number">2.2.3.</span> <span class="toc-nav-text">&#x66FF;&#x6362;&#x5339;&#x914D;&#x6B63;&#x5219;&#x89C4;&#x5219;&#x7684;&#x6587;&#x672C;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#案例replacefirst-vs-replaceall"><span class="toc-nav-number">2.2.3.1.</span> <span class="toc-nav-text">&#x6848;&#x4F8B;&#xFF1A;replaceFirst vs replaceAll</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#案例appendreplacement-appendtail-和-replaceall"><span class="toc-nav-number">2.2.3.2.</span> <span class="toc-nav-text">&#x6848;&#x4F8B;&#xFF1A;appendReplacement&#x3001;appendTail &#x548C; replaceAll</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#案例quotereplacement-和-replaceall解决特殊字符替换问题"><span class="toc-nav-number">2.2.3.3.</span> <span class="toc-nav-text">&#x6848;&#x4F8B;&#xFF1A;quoteReplacement &#x548C; replaceAll&#xFF0C;&#x89E3;&#x51B3;&#x7279;&#x6B8A;&#x5B57;&#x7B26;&#x66FF;&#x6362;&#x95EE;&#x9898;</span></a></li></ol></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#心法篇"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">&#x5FC3;&#x6CD5;&#x7BC7;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#元字符"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">&#x5143;&#x5B57;&#x7B26;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#基本元字符"><span class="toc-nav-number">3.1.1.</span> <span class="toc-nav-text">&#x57FA;&#x672C;&#x5143;&#x5B57;&#x7B26;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#多选-"><span class="toc-nav-number">3.1.1.1.</span> <span class="toc-nav-text">&#x591A;&#x9009; - |</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#分组-"><span class="toc-nav-number">3.1.1.2.</span> <span class="toc-nav-text">&#x5206;&#x7EC4; - ()</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#指定单字符有效范围-"><span class="toc-nav-number">3.1.1.3.</span> <span class="toc-nav-text">&#x6307;&#x5B9A;&#x5355;&#x5B57;&#x7B26;&#x6709;&#x6548;&#x8303;&#x56F4; - []</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#指定单字符无效范围-"><span class="toc-nav-number">3.1.1.4.</span> <span class="toc-nav-text">&#x6307;&#x5B9A;&#x5355;&#x5B57;&#x7B26;&#x65E0;&#x6548;&#x8303;&#x56F4; - [^]</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#限制字符数量-"><span class="toc-nav-number">3.1.1.5.</span> <span class="toc-nav-text">&#x9650;&#x5236;&#x5B57;&#x7B26;&#x6570;&#x91CF; - {}</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#转义字符-"><span class="toc-nav-number">3.1.1.6.</span> <span class="toc-nav-text">&#x8F6C;&#x4E49;&#x5B57;&#x7B26; - /</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#指定表达式字符串的开始和结尾-"><span class="toc-nav-number">3.1.1.7.</span> <span class="toc-nav-text">&#x6307;&#x5B9A;&#x8868;&#x8FBE;&#x5F0F;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5F00;&#x59CB;&#x548C;&#x7ED3;&#x5C3E; - ^&#x3001;$</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#等价字符"><span class="toc-nav-number">3.1.2.</span> <span class="toc-nav-text">&#x7B49;&#x4EF7;&#x5B57;&#x7B26;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#表示某一类型字符的等价字符"><span class="toc-nav-number">3.1.2.1.</span> <span class="toc-nav-text">&#x8868;&#x793A;&#x67D0;&#x4E00;&#x7C7B;&#x578B;&#x5B57;&#x7B26;&#x7684;&#x7B49;&#x4EF7;&#x5B57;&#x7B26;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#限制字符数量的等价字符"><span class="toc-nav-number">3.1.2.2.</span> <span class="toc-nav-text">&#x9650;&#x5236;&#x5B57;&#x7B26;&#x6570;&#x91CF;&#x7684;&#x7B49;&#x4EF7;&#x5B57;&#x7B26;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#元字符优先级顺序"><span class="toc-nav-number">3.1.3.</span> <span class="toc-nav-text">&#x5143;&#x5B57;&#x7B26;&#x4F18;&#x5148;&#x7EA7;&#x987A;&#x5E8F;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#分组构造"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">&#x5206;&#x7EC4;&#x6784;&#x9020;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#捕获与非捕获"><span class="toc-nav-number">3.2.1.</span> <span class="toc-nav-text">&#x6355;&#x83B7;&#x4E0E;&#x975E;&#x6355;&#x83B7;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#反向引用"><span class="toc-nav-number">3.2.2.</span> <span class="toc-nav-text">&#x53CD;&#x5411;&#x5F15;&#x7528;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#带编号的反向引用"><span class="toc-nav-number">3.2.2.1.</span> <span class="toc-nav-text">&#x5E26;&#x7F16;&#x53F7;&#x7684;&#x53CD;&#x5411;&#x5F15;&#x7528;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#命名的反向引用"><span class="toc-nav-number">3.2.2.2.</span> <span class="toc-nav-text">&#x547D;&#x540D;&#x7684;&#x53CD;&#x5411;&#x5F15;&#x7528;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#非捕获组"><span class="toc-nav-number">3.2.3.</span> <span class="toc-nav-text">&#x975E;&#x6355;&#x83B7;&#x7EC4;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#零宽断言"><span class="toc-nav-number">3.2.4.</span> <span class="toc-nav-text">&#x96F6;&#x5BBD;&#x65AD;&#x8A00;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#匹配-exp-前面的位置"><span class="toc-nav-number">3.2.4.1.</span> <span class="toc-nav-text">&#x5339;&#x914D; exp &#x524D;&#x9762;&#x7684;&#x4F4D;&#x7F6E;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#匹配-exp-后面的位置"><span class="toc-nav-number">3.2.4.2.</span> <span class="toc-nav-text">&#x5339;&#x914D; exp &#x540E;&#x9762;&#x7684;&#x4F4D;&#x7F6E;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#匹配后面跟的不是-exp-的位置"><span class="toc-nav-number">3.2.4.3.</span> <span class="toc-nav-text">&#x5339;&#x914D;&#x540E;&#x9762;&#x8DDF;&#x7684;&#x4E0D;&#x662F; exp &#x7684;&#x4F4D;&#x7F6E;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#匹配前面不是-exp-的位置"><span class="toc-nav-number">3.2.4.4.</span> <span class="toc-nav-text">&#x5339;&#x914D;&#x524D;&#x9762;&#x4E0D;&#x662F; exp &#x7684;&#x4F4D;&#x7F6E;</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#贪婪与懒惰"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">&#x8D2A;&#x5A6A;&#x4E0E;&#x61D2;&#x60F0;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#附录"><span class="toc-nav-number">3.4.</span> <span class="toc-nav-text">&#x9644;&#x5F55;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#匹配正则字符串的方法"><span class="toc-nav-number">3.4.1.</span> <span class="toc-nav-text">&#x5339;&#x914D;&#x6B63;&#x5219;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x65B9;&#x6CD5;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#速查元字符字典"><span class="toc-nav-number">3.4.2.</span> <span class="toc-nav-text">&#x901F;&#x67E5;&#x5143;&#x5B57;&#x7B26;&#x5B57;&#x5178;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#限定符"><span class="toc-nav-number">3.4.2.1.</span> <span class="toc-nav-text">&#x9650;&#x5B9A;&#x7B26;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#定位符"><span class="toc-nav-number">3.4.2.2.</span> <span class="toc-nav-text">&#x5B9A;&#x4F4D;&#x7B26;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#非打印字符"><span class="toc-nav-number">3.4.2.3.</span> <span class="toc-nav-text">&#x975E;&#x6253;&#x5370;&#x5B57;&#x7B26;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#分组"><span class="toc-nav-number">3.4.2.4.</span> <span class="toc-nav-text">&#x5206;&#x7EC4;</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#特殊符号"><span class="toc-nav-number">3.4.2.5.</span> <span class="toc-nav-text">&#x7279;&#x6B8A;&#x7B26;&#x53F7;</span></a></li></ol></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#正则应用"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">&#x6B63;&#x5219;&#x5E94;&#x7528;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#最实用的正则"><span class="toc-nav-number">4.1.</span> <span class="toc-nav-text">&#x6700;&#x5B9E;&#x7528;&#x7684;&#x6B63;&#x5219;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#校验中文"><span class="toc-nav-number">4.1.1.</span> <span class="toc-nav-text">&#x6821;&#x9A8C;&#x4E2D;&#x6587;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#校验身份证号码"><span class="toc-nav-number">4.1.2.</span> <span class="toc-nav-text">&#x6821;&#x9A8C;&#x8EAB;&#x4EFD;&#x8BC1;&#x53F7;&#x7801;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#校验有效用户名-密码"><span class="toc-nav-number">4.1.3.</span> <span class="toc-nav-text">&#x6821;&#x9A8C;&#x6709;&#x6548;&#x7528;&#x6237;&#x540D;&#x3001;&#x5BC6;&#x7801;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#校验邮箱"><span class="toc-nav-number">4.1.4.</span> <span class="toc-nav-text">&#x6821;&#x9A8C;&#x90AE;&#x7BB1;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#校验-url"><span class="toc-nav-number">4.1.5.</span> <span class="toc-nav-text">&#x6821;&#x9A8C; URL</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#校验时间"><span class="toc-nav-number">4.1.6.</span> <span class="toc-nav-text">&#x6821;&#x9A8C;&#x65F6;&#x95F4;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#校验日期"><span class="toc-nav-number">4.1.7.</span> <span class="toc-nav-text">&#x6821;&#x9A8C;&#x65E5;&#x671F;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#校验中国手机号码"><span class="toc-nav-number">4.1.8.</span> <span class="toc-nav-text">&#x6821;&#x9A8C;&#x4E2D;&#x56FD;&#x624B;&#x673A;&#x53F7;&#x7801;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#校验中国固话号码"><span class="toc-nav-number">4.1.9.</span> <span class="toc-nav-text">&#x6821;&#x9A8C;&#x4E2D;&#x56FD;&#x56FA;&#x8BDD;&#x53F7;&#x7801;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#校验-ipv4-地址"><span class="toc-nav-number">4.1.10.</span> <span class="toc-nav-text">&#x6821;&#x9A8C; IPv4 &#x5730;&#x5740;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#校验-ipv6-地址"><span class="toc-nav-number">4.1.11.</span> <span class="toc-nav-text">&#x6821;&#x9A8C; IPv6 &#x5730;&#x5740;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#特定字符"><span class="toc-nav-number">4.2.</span> <span class="toc-nav-text">&#x7279;&#x5B9A;&#x5B57;&#x7B26;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#特定数字"><span class="toc-nav-number">4.3.</span> <span class="toc-nav-text">&#x7279;&#x5B9A;&#x6570;&#x5B57;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#参考"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">&#x53C2;&#x8003;</span></a></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#java核心技术" title="java核心技术">java核心技术</a>
                        
                          <a class="tag" href="/tags/#regex" title="regex">regex</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="https://blog.csdn.net/nqmysbd" target="_blank">LiaoCan</a></li>
                    
                        <li><a href="http://blog.didispace.com/" target="_blank">程序猿DD</a></li>
                    
                        <li><a href="https://www.fangzhipeng.com" target="_blank">方志朋</a></li>
                    
                        <li><a href="http://www.ityouknow.com" target="_blank">纯洁的微笑</a></li>
                    
                        <li><a href="http://www.jiangxinlingdu.com" target="_blank">匠心零度</a></li>
                    
                        <li><a href="http://jilinwula.com/" target="_blank">吉林乌拉</a></li>
                    
                        <li><a href="http://cmsblogs.com" target="_blank">Java技术驿站</a></li>
                    
                        <li><a href="https://www.bysocket.com/" target="_blank">泥瓦匠BYSocket</a></li>
                    
                        <li><a href="https://www.bossding.com.cn" target="_blank">微笑的丁总</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>






    <!-- 来必力City版公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
       (function(d, s) {
           var j, e = d.getElementsByTagName(s)[0];
    
           if (typeof LivereTower === 'function') { return; }
    
           j = d.createElement(s);
           j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
           j.async = true;
    
           e.parentNode.insertBefore(j, e);
       })(document, 'script');
    </script>
    <noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
    <!-- 来必力City版 公共JS代码 end -->



<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



<!-- 添加自动推送链接 -->
<script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>


<!-- 复制添加版权申明-->
<script>
    /**/
    function setClipboardText(event){
        event.preventDefault();//阻止元素发生默认的行为（例如，当点击提交按钮时阻止对表单的提交）。
        var node = document.createElement('div');
        //对documentfragment不熟，不知道怎么获取里面的内容，用了一个比较笨的方式
        node.appendChild(window.getSelection().getRangeAt(0).cloneContents());
        //getRangeAt(0)返回对基于零的数字索引与传递参数匹配的选择对象中的范围的引用。对于连续选择，参数应为零。
        var htmlData = '<div>'
            + node.innerHTML
            + '<br /><br />著作权归作者所有。<br />'
            + '商业转载请联系作者获得授权，非商业转载请注明出处。<br />'
            + '作者：liaocan <br />链接：'
            + location.href
            + '<br />来源：liaocan.top<br /><br />'
            + '</div>';
        var textData = window.getSelection().getRangeAt(0)
            + '\n\n著作权归作者所有。\n'
            + '商业转载请联系作者获得授权，非商业转载请注明出处。\n'
            + '作者：liaocan\n'
            + '链接：'
            + location.href
            + '来源：liaocan.top\n\n';
        if(event.clipboardData){
            event.clipboardData.setData("text/html", htmlData);
            //setData(剪贴板格式, 数据) 给剪贴板赋予指定格式的数据。返回 true 表示操作成功。
            event.clipboardData.setData("text/plain",textData);
        }
        else if(window.clipboardData){ //window.clipboardData的作用是在页面上将需要的东西复制到剪贴板上，提供了对于预定义的剪贴板格式的访问，以便在编辑操作中使用。
            return window.clipboardData.setData("text", textData);
        }
    };
 
    document.addEventListener('copy',function(e){
        setClipboardText(e);
    });
</script>



<!-- chrome Firefox 中文锚点定位失效-->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<!-- smooth scroll behavior polyfill  -->
<script type="text/javascript" src="/js/smoothscroll.js"></script>
<script>
        $('#toc').on('click','a',function(a){
            // var isChrome = window.navigator.userAgent.indexOf("Chrome") !== -1;
            // console.log(window.navigator.userAgent,isChrome)
                // if(isChrome) {
                    // console.log(a.currentTarget.outerHTML);
                    // console.log($(a.currentTarget).attr("href"));
                    //跳转到指定锚点
                    // document.getElementById(a.target.innerText.toLowerCase()).scrollIntoView(true);
                document.getElementById($(a.currentTarget).attr("href").replace("#","")).scrollIntoView({behavior: 'smooth' });
                // }
                // console.log(a,a.currentTarget,$(a.currentTarget),$(a.currentTarget)[0])
                // a.currentTarget.scrollBy({ top: 0, left: 0, behavior: 'smooth' });
                // a.currentTarget.scrollIntoView({behavior: 'smooth' });

        })  



</script>



    

     
  




    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                

                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/nqmysb" title="github">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                


                
                    <li>
                        <a target="_blank"  href="https://blog.csdn.net/nqmysbd" title="CSDN">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-csdn fa-stack-1x fa-inverse">C</i>
                            </span>
                        </a>
                    </li>
                


                
                    <li>
                        <a target="_blank"  href="https://yq.aliyun.com/u/nqmysb" title="云栖社区">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-alyun fa-stack-1x fa-inverse">云</i>
                            </span>
                        </a>
                    </li>
                


                
                    <li>
                        <a target="_blank"  href="https://gitee.com/liaocwang" title="gitee">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-git fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank"  href="mailto:593013537@qq.com" title="email">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope-o fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Liao Can 2019 
                    <br>
                    Theme by <a target="_blank" href="http://www.huweihuang.com">胡伟煌</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    re-Ported by <a href="https://liaocan.top">Liaocan</a> 
                     | 
                     <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=nqmysb&repo=hexo-theme-huweihuang&type=star&count=true" >
                    </iframe>
                    <br />
                    粤ICP备19058711号 |            
                    <!--总访问量统计-->
                    
                        <span id="busuanzi_container_site_pv" style="margin-left: 3px;">
                            总访问量<span id="busuanzi_value_site_pv"></span>次
                        </span>
                        <div style="display:none" >本站访客数<span  id="busuanzi_value_site_uv"></span>人次</div>
                    
                    <!--总访问量统计-->
                      
                    
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://liaocan.top/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-132197826-1';
    var _gaDomain = 'liaocan.top';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->

<script>
    // dynamic User by Hux
    var _baId = '6f0414ec28cbdc196e93beaa4472a18d';

    // Originial
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?" + _baId;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>



<script type="text/javascript">

    if(document.getElementById("tagscloud")) {
        //按需加载
        document.write("<scr"+"ipt src=\"/js/tagsCloud.js\" language=\"JavaScript\" charset=\"gb2312\"></sc"+"ript>")
    }
</script>


	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
    <!--单击显示文字-->
    <script type="text/javascript" src="/js/click_show_text.js"></script>
<!-- Image to hack wechat -->
<!-- <img src="https://liaocan.top/img/icon_wechat.png" width="0" height="0" /> -->
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
